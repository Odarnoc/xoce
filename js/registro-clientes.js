$("#nameregistrocli").keyup(function () {

  var nameregistrocli = $("#nameregistrocli").val();
  if (nameregistrocli == "") {

    $("#labelnameregistrocli").css("color", "white");
    $("#nameregistrocli").attr("placeholder", "Nombre");

  } else {
    $("#labelnameregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#nameregistrocli").focusin(function () {

  var nameregistrocli = $("#nameregistrocli").val();
  if (nameregistrocli == "") {

    $("#labelnameregistrocli").css("color", "white");
    $("#nameregistrocli").attr("placeholder", "Nombre");

  } else {
    $("#labelnameregistrocli").css("color", "rgba(0,0,0,.5)");
  }


});

$("#nameregistrocli").focusout(function () {

  var nameregistrocli = $("#nameregistrocli").val();
  if (nameregistrocli == "") {

    $("#labelnameregistrocli").css("color", "white");
    $("#nameregistrocli").attr("placeholder", "Nombre");

  } else {
    $("#labelnameregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// APELLIDO INPUT

$("#apellidoregistrocli").keyup(function () {

  var apellidoregistrocli = $("#apellidoregistrocli").val();
  if (apellidoregistrocli == "") {

    $("#labelapellidoregistrocli").css("color", "white");
    $("#apellidoregistrocli").attr("placeholder", "Apellido");

  } else {
    $("#labelapellidoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#apellidoregistrocli").focusin(function () {

  var apellidoregistrocli = $("#apellidoregistrocli").val();
  if (apellidoregistrocli == "") {

    $("#labelapellidoregistrocli").css("color", "white");
    $("#apellidoregistrocli").attr("placeholder", "Apellido");

  } else {
    $("#labelapellidoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#apellidoregistrocli").focusout(function () {

  var apellidoregistrocli = $("#apellidoregistrocli").val();
  if (apellidoregistrocli == "") {

    $("#labelapellidoregistrocli").css("color", "white");
    $("#apellidoregistrocli").attr("placeholder", "Apellido");

  } else {
    $("#labelapellidoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// CORREO ELECTRONICO INPUT

$("#mailregistrocli").keyup(function () {

  var mailregistrocli = $("#mailregistrocli").val();
  if (mailregistrocli == "") {

    $("#labelmailregistrocli").css("color", "white");
    $("#mailregistrocli").attr("placeholder", "Correo electrónico");

  } else {
    $("#labelmailregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#mailregistrocli").focusin(function () {

  var mailregistrocli = $("#mailregistrocli").val();
  if (mailregistrocli == "") {

    $("#labelmailregistrocli").css("color", "white");
    $("#mailregistrocli").attr("placeholder", "Correo electrónico");

  } else {
    $("#labelmailregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#mailregistrocli").focusout(function () {

  var mailregistrocli = $("#mailregistrocli").val();
  if (mailregistrocli == "") {

    $("#labelmailregistrocli").css("color", "white");
    $("#mailregistrocli").attr("placeholder", "Correo electrónico");

  } else {
    $("#labelmailregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// TELEFONO INPUT

$("#phoneregistrocli").keyup(function () {

  var phoneregistrocli = $("#phoneregistrocli").val();
  if (phoneregistrocli == "") {

    $("#labelphoneregistrocli").css("color", "white");
    $("#phoneregistrocli").attr("placeholder", "Teléfono");

  } else {
    $("#labelphoneregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#phoneregistrocli").focusin(function () {

  var phoneregistrocli = $("#phoneregistrocli").val();
  if (phoneregistrocli == "") {

    $("#labelphoneregistrocli").css("color", "white");
    $("#phoneregistrocli").attr("placeholder", "Teléfono");

  } else {
    $("#labelphoneregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#phoneregistrocli").focusout(function () {

  var phoneregistrocli = $("#phoneregistrocli").val();
  if (phoneregistrocli == "") {

    $("#labelphoneregistrocli").css("color", "white");
    $("#phoneregistrocli").attr("placeholder", "Teléfono");

  } else {
    $("#labelphoneregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// DIRECCION INPUT

$("#direccionregistrocli").keyup(function () {

  var direccionregistrocli = $("#direccionregistrocli").val();
  if (direccionregistrocli == "") {

    $("#labeldireccionregistrocli").css("color", "white");
    $("#direccionregistrocli").attr("placeholder", "Dirección");

  } else {
    $("#labeldireccionregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#direccionregistrocli").focusin(function () {

  var direccionregistrocli = $("#direccionregistrocli").val();
  if (direccionregistrocli == "") {

    $("#labeldireccionregistrocli").css("color", "white");
    $("#direccionregistrocli").attr("placeholder", "Dirección");

  } else {
    $("#labeldireccionregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#direccionregistrocli").focusout(function () {

  var direccionregistrocli = $("#direccionregistrocli").val();
  if (direccionregistrocli == "") {

    $("#labeldireccionregistrocli").css("color", "white");
    $("#direccionregistrocli").attr("placeholder", "Dirección");

  } else {
    $("#labeldireccionregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// CODIGO POSTAL INPUT

$("#codigoregistrocli").keyup(function () {

  var codigoregistrocli = $("#codigoregistrocli").val();
  if (codigoregistrocli == "") {

    $("#labelcodigoregistrocli").css("color", "white");
    $("#codigoregistrocli").attr("placeholder", "Código postal");

  } else {
    $("#labelcodigoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#codigoregistrocli").focusin(function () {

  var codigoregistrocli = $("#codigoregistrocli").val();
  if (codigoregistrocli == "") {

    $("#labelcodigoregistrocli").css("color", "white");
    $("#codigoregistrocli").attr("placeholder", "Código postal");

  } else {
    $("#labelcodigoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#codigoregistrocli").focusout(function () {

  var codigoregistrocli = $("#codigoregistrocli").val();
  if (codigoregistrocli == "") {

    $("#labelcodigoregistrocli").css("color", "white");
    $("#codigoregistrocli").attr("placeholder", "Código postal");

  } else {
    $("#labelcodigoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// ESTADO INPUT

$("#estadoregistrocli").keyup(function () {

  var estadoregistrocli = $("#estadoregistrocli").val();
  if (estadoregistrocli == "") {

    $("#labelestadoregistrocli").css("color", "white");
    $("#estadoregistrocli").attr("placeholder", "Estado");

  } else {
    $("#labelestadoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#estadoregistrocli").focusin(function () {

  var estadoregistrocli = $("#estadoregistrocli").val();
  if (estadoregistrocli == "") {

    $("#labelestadoregistrocli").css("color", "white");
    $("#estadoregistrocli").attr("placeholder", "Estado");

  } else {
    $("#labelestadoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#estadoregistrocli").focusout(function () {

  var estadoregistrocli = $("#estadoregistrocli").val();
  if (estadoregistrocli == "") {

    $("#labelestadoregistrocli").css("color", "white");
    $("#estadoregistrocli").attr("placeholder", "Estado");

  } else {
    $("#labelestadoregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


// MUNICIPIO INPUT

$("#municipioregistrocli").keyup(function () {

  var municipioregistrocli = $("#municipioregistrocli").val();
  if (municipioregistrocli == "") {

    $("#labelmunicipioregistrocli").css("color", "white");
    $("#municipioregistrocli").attr("placeholder", "Municipio");

  } else {
    $("#labelmunicipioregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#municipioregistrocli").focusin(function () {

  var municipioregistrocli = $("#municipioregistrocli").val();
  if (municipioregistrocli == "") {

    $("#labelmunicipioregistrocli").css("color", "white");
    $("#municipioregistrocli").attr("placeholder", "Municipio");

  } else {
    $("#labelmunicipioregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#municipioregistrocli").focusout(function () {

  var municipioregistrocli = $("#municipioregistrocli").val();
  if (municipioregistrocli == "") {

    $("#labelmunicipioregistrocli").css("color", "white");
    $("#municipioregistrocli").attr("placeholder", "Municipio");

  } else {
    $("#labelmunicipioregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

// FECHA DE NACIMIENTO INPUT

$("#fecharegistrocli").keyup(function () {

  var fecharegistrocli = $("#fecharegistrocli").val();
  if (fecharegistrocli == "") {

    $("#labelfecharegistrocli").css("color", "white");
    $("#fecharegistrocli").attr("placeholder", "Fecha de nacimiento");

  } else {
    $("#labelfecharegistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#fecharegistrocli").focusin(function () {

  var fecharegistrocli = $("#fecharegistrocli").val();
  if (fecharegistrocli == "") {

    $("#labelfecharegistrocli").css("color", "white");
    $("#fecharegistrocli").attr("placeholder", "Fecha de nacimiento");

  } else {
    $("#labelfecharegistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#fecharegistrocli").focusout(function () {

  var fecharegistrocli = $("#fecharegistrocli").val();
  if (fecharegistrocli == "") {

    $("#labelfecharegistrocli").css("color", "white");
    $("#fecharegistrocli").attr("placeholder", "Fecha de nacimiento");

  } else {
    $("#labelfecharegistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

// ESTADO CIVIL INPUT

$("#estadocivilregistrocli").keyup(function () {

  var estadocivilregistrocli = $("#estadocivilregistrocli").val();
  if (estadocivilregistrocli == "") {

    $("#labelestadocivilregistrocli").css("color", "white");
    $("#estadocivilregistrocli").attr("placeholder", "Estado civil");

  } else {
    $("#labelestadocivilregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});


$("#estadocivilregistrocli").focusin(function () {

  var estadocivilregistrocli = $("#estadocivilregistrocli").val();
  if (estadocivilregistrocli == "") {

    $("#labelestadocivilregistrocli").css("color", "white");
    $("#estadocivilregistrocli").attr("placeholder", "Estado civil");

  } else {
    $("#labelestadocivilregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});

$("#estadocivilregistrocli").focusout(function () {

  var estadocivilregistrocli = $("#estadocivilregistrocli").val();
  if (estadocivilregistrocli == "") {

    $("#labelestadocivilregistrocli").css("color", "white");
    $("#estadocivilregistrocli").attr("placeholder", "Estado civil");

  } else {
    $("#labelestadocivilregistrocli").css("color", "rgba(0,0,0,.5)");
  }

});
function tieneDatos(value, nombreCampo) {
  let tieneDatos = true;
  if (value == undefined || value == null || value == '') {
    swal({
      title: 'ERROR',
      text: 'El campo "' + nombreCampo + '" está vacío.',
      icon: 'error',
      button: 'OK',
      closeOnClickOutside: true
    });
    tieneDatos = false;
  }
  return tieneDatos;
}
function isTelefono(value) {
  let isTelefono = true;
  let pattern = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/im;
  if (!value.match(pattern)) {
    swal({
      title: 'ERROR',
      text: 'Numero de teléfono invalido',
      icon: 'error',
      button: 'OK',
      closeOnClickOutside: false
    });
    isTelefono = false;
  }
  return isTelefono;
}
function isEmail(value) {
  let isEmail = true;
  let pattern = /^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;
  if (!value.match(pattern)) {
    swal({
      title: 'ERROR',
      text: 'Correo invalido',
      icon: 'error',
      button: 'OK',
      closeOnClickOutside: false
    });
    isEmail = false;
  }
  return isEmail;
}

function registrarCliente() {
  let nombre = $('#nameregistrocli').val().trim(),
    apellido = $('#apellidoregistrocli').val().trim(),
    email = $('#mailregistrocli').val().trim(),
    telefono = $('#phoneregistrocli').val().trim(),
    direccion = $('#direccionregistrocli').val().trim(),
    cp = $('#codigoregistrocli').val().trim(),
    estado = $('#estadoregistrocli').val().trim(),
    municipio = $('#municipioregistrocli').val().trim(),
    fechaNacimiento = $('#fecharegistrocli').val().trim(),
    estadoCivil = $('#estadocivilregistrocli').val().trim(),
    referido = null,
    pass = $('#passcli').val();
  console.log('entre');
  if (tieneDatos(nombre, 'Nombre') &&
    tieneDatos(apellido, 'Apellido') &&
    tieneDatos(email, 'Correo electrónico') && isEmail(email) &&
    tieneDatos(telefono, 'Teléfono') && isTelefono(telefono) &&
    tieneDatos(direccion, 'Dirección') &&
    tieneDatos(cp, 'Código postal') &&
    tieneDatos(estado, 'Estado') &&
    tieneDatos(municipio, 'Municipio') &&
    tieneDatos(fechaNacimiento, 'Fecha de nacimiento') &&
    tieneDatos(estadoCivil, 'Estado civil') && 
    tieneDatos(pass, 'Contraseña')) {
    $.ajax({
      type: 'post',
      url: './rutas.php',
      data: 'funcion=registrar_cliente' + '&nombre=' + nombre
        + '&apellido=' + apellido + '&email=' + email + '&telefono=' + telefono
        + '&direccion=' + direccion + '&cp=' + cp + '&estado=' + estado
        + '&municipio=' + municipio + '&fechaNacimiento=' + fechaNacimiento + '&idreferido=' + referido
        + '&estadoCivil=' + estadoCivil +'&pass=' + pass,
      success: function (cad) {
        if (cad.includes("success")) {
          location.href = "index.php";
        } else if (cad.includes("Error-")) {
          $.ajax({
            type: 'post',
            url: './rutas.php',
            data: 'funcion=eliminar_referencia_cliente' + '&id=' + cad.split("-")[1],
            success: function (cad) {
              if(cad == 'success'){
                swal({
                  title: 'ERROR',
                  text: "Maximo de referenciados alcanzados",
                  icon: 'error',
                  button: 'OK',
                  closeOnClickOutside: false
                }).then((ok) => {
                  if (ok) {
                    location.href = "iniciosCliente-movil.php";
                  }
                });
              }else{
                swal("Error!", cad, "error");
              }

            }
          });
        } else {
          swal("Error!", "Correo en uso!", "error");
        }
      }
    });
  }
}

function registrarClienteAdmin() {
  let nombre = $('#nameregistrocli').val().trim(),
    apellido = $('#apellidoregistrocli').val().trim(),
    email = $('#mailregistrocli').val().trim(),
    telefono = $('#phoneregistrocli').val().trim(),
    direccion = $('#direccionregistrocli').val().trim(),
    cp = $('#codigoregistrocli').val().trim(),
    estado = $('#estadoregistrocli').val().trim(),
    municipio = $('#municipioregistrocli').val().trim(),
    fechaNacimiento = $('#fecharegistrocli').val().trim(),
    estadoCivil = $('#estadocivilregistrocli').val().trim(),
    referido = $('#referido').val(),
    pass = 'Xc19xC20',
    tipo = $('#mayorista').val();
  console.log('entre');
  if (tieneDatos(nombre, 'Nombre') &&
    tieneDatos(apellido, 'Apellido') &&
    tieneDatos(email, 'Correo electrónico') && isEmail(email) &&
    tieneDatos(telefono, 'Teléfono') && isTelefono(telefono) &&
    tieneDatos(direccion, 'Dirección') &&
    tieneDatos(cp, 'Código postal') &&
    tieneDatos(estado, 'Estado') &&
    tieneDatos(municipio, 'Municipio') &&
    tieneDatos(fechaNacimiento, 'Fecha de nacimiento') &&
    tieneDatos(estadoCivil, 'Estado civil') && 
    tieneDatos(pass, 'Contraseña')) {
    $.ajax({
      type: 'post',
      url: './rutas.php',
      data: 'funcion=registrar_cliente' + '&nombre=' + nombre
        + '&apellido=' + apellido + '&email=' + email + '&telefono=' + telefono
        + '&direccion=' + direccion + '&cp=' + cp + '&estado=' + estado
        + '&municipio=' + municipio + '&fechaNacimiento=' + fechaNacimiento
        + '&estadoCivil=' + estadoCivil + '&tipo=' + tipo + '&referido=' + referido +'&pass=' + pass,
      success: function (cad) {
        if (cad.includes("success")) {
          location.href = "admin.php";
        } else if (cad.includes("Error-")) {
          $.ajax({
            type: 'post',
            url: './rutas.php',
            data: 'funcion=eliminar_referencia_cliente' + '&id=' + cad.split("-")[1],
            success: function (cad) {
              if(cad == 'success'){
                swal({
                  title: 'ERROR',
                  text: "Maximo de referenciados alcanzados",
                  icon: 'error',
                  button: 'OK',
                  closeOnClickOutside: false
                }).then((ok) => {
                  if (ok) {
                    location.href = "iniciosCliente-movil.php";
                  }
                });
              }else{
                swal("Error!", cad, "error");
              }

            }
          });
        } else {
          swal("Error!", "Correo en uso!", "error");
        }
      }
    });
  }
}


function editarCliente() {
  let nombre = $('#nameregistrocli').val().trim(),
    apellido = $('#apellidoregistrocli').val().trim(),
    email = $('#mailregistrocli').val().trim(),
    telefono = $('#phoneregistrocli').val().trim(),
    direccion = $('#direccionregistrocli').val().trim(),
    cp = $('#codigoregistrocli').val().trim(),
    estado = $('#estadoregistrocli').val().trim(),
    municipio = $('#municipioregistrocli').val().trim(),
    fechaNacimiento = $('#fecharegistrocli').val().trim(),
    estadoCivil = $('#estadocivilregistrocli').val().trim(),
    referido = $('#referido').val(),
    isMayorista = $('#defaultInline2').prop('checked');
  let tipo = 'Minorista';
  { isMayorista === true ? tipo = 'Mayorista' : tipo = 'Minorista' }
  if (window.location.search.includes('client')) {
    let id = window.location.search.substring(1).split('=')[1];
    if (tieneDatos(nombre, 'Nombre') &&
      tieneDatos(apellido, 'Apellido') &&
      tieneDatos(email, 'Correo electrónico') && isEmail(email) &&
      tieneDatos(telefono, 'Teléfono') && isTelefono(telefono) &&
      tieneDatos(direccion, 'Dirección') &&
      tieneDatos(cp, 'Código postal') &&
      tieneDatos(municipio, 'Municipio') &&
      tieneDatos(fechaNacimiento, 'Fecha de nacimiento') &&
      tieneDatos(estadoCivil, 'Estado civil')) {
      console.log('Hola no funciono'); 
      $.ajax({
        type: 'post',
        url: 'rutas.php',
        data: 'funcion=editar_cliente' + '&nombre=' + nombre
          + '&apellido=' + apellido + '&email=' + email + '&telefono=' + telefono
          + '&direccion=' + direccion + '&cp=' + cp + '&estado=' + estado
          + '&municipio=' + municipio + '&fechaNacimiento=' + fechaNacimiento
          + '&estadoCivil=' + estadoCivil + '&tipo=' + tipo + '&id=' + id + '&referido=' + referido,
        success: function (cad) {
          if (cad === "success") {
            location.href = "admin.php";
          }
        }
      });
    }
  } else {
    swal({
      title: 'ERROR',
      text: 'Cliente no encontrado',
      icon: 'error',
      button: 'OK',
      closeOnClickOutside: false
    });
  }
}
function validar() {
  $.ajax({
    type: 'post',
    url: 'rutas.php',
    data: 'funcion=validar_matriz',
    success: function (cad) {
      console.log(cad);
    }
  });
}
function configMatriz() {
  let json = {
    max_referidos: 3,
    max_nivel: 3,
    comisiones: [
      5, 10, 15
    ]
  };
  let id = '';
  $.ajax({
    type: 'post',
    url: 'rutas.php',
    data: 'funcion=config_matriz' + '&json=' + JSON.stringify(json) + '&id=' + id,
    success: function (cad) {
      if (cad === "success") {
        location.href = "admin.php";
      } else {
        console.log(cad);
      }
    }
  });
}